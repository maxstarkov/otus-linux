{
  "variables": {
    "artifact_description": "CentOS 7.7 with kernel 5.x",
    "image_name": "centos-7.7"
  },
  "builders": [
    {
      "name": "{{user `image_name`}}",
      "box_name": "{{user `image_name`}}",
      "communicator": "ssh",
      "source_path": "centos/7",
      "provider": "virtualbox",
      "add_force": true,
      "type": "vagrant"
    }
  ],
  "provisioners": [
    {
      "type": "shell",
      "execute_command": "{{.Vars}} sudo -S -E bash '{{.Path}}'",
      "start_retry_timeout": "1m",
      "expect_disconnect": true,
      "pause_before": "20s",
      "skip_clean": true,
      "override": {
        "{{user `image_name`}}": {
          "scripts": [
            "scripts/stage-1-kernel-update.sh",
            "scripts/stage-1-2-vbguest-update.sh",
            "scripts/stage-2-clean.sh"
          ]
        }
      }
    }
  ]
}